using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using AdaptedSlottedAlohaWeb.Controllers.Aloha;
using Microsoft.AspNetCore.Mvc;

namespace AdaptedSlottedAlohaWeb.Controllers
{
    [Route("api/[controller]")]
    public class AlohaController : Controller
    {
        [HttpGet("[action]")]
        public String Data()
        {
            return "Hello, I'm Vera!";
        }

        public class InputParameters
        {
            public int NumberOfStations { get; set; } //combobox1
            public double InputFlow { get; set; } //combobox2
            public int NumberOfFrames { get; set; } //combobox3
        }

        [HttpPost("[action]")]
        public IActionResult Calculation([FromBody]InputParameters inputParameters)
        {
            var alohaEngine = new Aloha.Engine(inputParameters.NumberOfStations,
                inputParameters.InputFlow,
                inputParameters.NumberOfFrames);
            var outputResults = alohaEngine.GetStatistics();
            alohaEngine = null;
            return Json(outputResults);
        }
    }
}
